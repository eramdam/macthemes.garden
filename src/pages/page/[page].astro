---
import { getCollection } from "astro:content";
import { isNumber } from "lodash-es";
import IndexPage from "../../components/IndexPage.astro";
import { getSortAndOrderFromUrl, PAGINATION } from "../../helpers";

const themes = await getCollection("themes");
const pageRaw = Astro.params.page;
let pageNumber = parseInt(pageRaw || "1", 10);
if (!isNumber(pageNumber)) {
  pageNumber = 1;
}
const { sort, order } = getSortAndOrderFromUrl(Astro.url);
---

<IndexPage
  page={PAGINATION.getPage(themes, pageNumber, sort, order)}
  sort={sort}
  order={order}
/>
