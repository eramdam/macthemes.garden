---
export const prerender = true;
import { getCollection } from "astro:content";
import IndexPage from "../components/IndexPage.astro";
import { PAGINATION } from "../helpers";
import { getLikeCountsByThemeIds } from "../helpers/dbHelpers";
const themes = await getCollection("themes");
const likesCountByID = await getLikeCountsByThemeIds();
const themesWithLikes = themes.map((t) => {
  return { ...t, likes: likesCountByID[t.id] || 0 };
});
---

<IndexPage page={PAGINATION.getPage(themesWithLikes, 1, "created", "desc")} />
