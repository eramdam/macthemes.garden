---
import { OS9Button } from "../components/OS9Button";
import OS9Window from "../components/OS9Window.astro";
import { targetPaletteColors } from "../helpers/paletteHelpers";
import BaseLayout from "../layouts/BaseLayout.astro";
import { customSlugify } from "../themesLoader";
---

<style>
  :root {
    --color-picker-size: 14px;
    --scale: 1.6;
    --color-picker-item-diag: (var(--color-picker-size) * var(--scale)) *
      sqrt(2);
  }
  .color-picker-wrapper {
    overflow: hidden;
    height: calc(var(--color-picker-item-diag) * 5);
    padding-top: calc(var(--color-picker-item-diag) / 2);
  }
  .color-picker {
    display: grid;
    grid-template-columns: repeat(
      12,
      calc(var(--color-picker-size) * var(--scale))
    );
    grid-template-rows: repeat(
      13,
      calc(var(--color-picker-size) * var(--scale))
    );
    width: calc(20 * var(--color-picker-size));
    grid-auto-flow: row;
    rotate: -45deg;
    translate: 0 calc(var(--color-picker-item-diag) * -2.8);
    transform-origin: center center;
    gap: 1px;

    margin: 0 auto;
  }

  .color-picker-block {
    height: calc(var(--color-picker-size) * var(--scale));
    width: calc(var(--color-picker-size) * var(--scale));
    box-shadow: 0 0 0 1px black;
  }

  .color-picker-block:hover {
    scale: 1.5;
  }

  .color-picker-current-name {
    text-align: center;
    font-size: 18px;
    font-weight: 600;
  }

  /* 1st row */
  .color-picker-item:nth-child(1) {
    grid-column: 3;
    grid-row: 1;
  }
  .color-picker-item:nth-child(2) {
    grid-column: 4;
    grid-row: 2;
  }
  .color-picker-item:nth-child(3) {
    grid-column: 5;
    grid-row: 3;
  }
  .color-picker-item:nth-child(4) {
    grid-column: 6;
    grid-row: 4;
  }
  .color-picker-item:nth-child(5) {
    grid-column: 7;
    grid-row: 5;
  }
  .color-picker-item:nth-child(6) {
    grid-column: 8;
    grid-row: 6;
  }
  .color-picker-item:nth-child(7) {
    grid-column: 9;
    grid-row: 7;
  }
  .color-picker-item:nth-child(8) {
    grid-column: 10;
    grid-row: 8;
  }
  .color-picker-item:nth-child(9) {
    grid-column: 11;
    grid-row: 9;
  }
  .color-picker-item:nth-child(10) {
    grid-column: 12;
    grid-row: 10;
  }

  /* 2nd row */
  .color-picker-item:nth-child(11) {
    grid-column: 3;
    grid-row: 2;
  }
  .color-picker-item:nth-child(12) {
    grid-column: 4;
    grid-row: 3;
  }
  .color-picker-item:nth-child(13) {
    grid-column: 5;
    grid-row: 4;
  }
  .color-picker-item:nth-child(14) {
    grid-column: 6;
    grid-row: 5;
  }
  .color-picker-item:nth-child(15) {
    grid-column: 7;
    grid-row: 6;
  }
  .color-picker-item:nth-child(16) {
    grid-column: 8;
    grid-row: 7;
  }
  .color-picker-item:nth-child(17) {
    grid-column: 9;
    grid-row: 8;
  }
  .color-picker-item:nth-child(18) {
    grid-column: 10;
    grid-row: 9;
  }
  .color-picker-item:nth-child(19) {
    grid-column: 11;
    grid-row: 10;
  }
  .color-picker-item:nth-child(20) {
    grid-column: 12;
    grid-row: 11;
  }

  /* 3rd row */
  .color-picker-item:nth-child(21) {
    grid-column: 2;
    grid-row: 2;
  }
  .color-picker-item:nth-child(22) {
    grid-column: 3;
    grid-row: 3;
  }
  .color-picker-item:nth-child(23) {
    grid-column: 4;
    grid-row: 4;
  }
  .color-picker-item:nth-child(24) {
    grid-column: 5;
    grid-row: 5;
  }
  .color-picker-item:nth-child(25) {
    grid-column: 6;
    grid-row: 6;
  }
  .color-picker-item:nth-child(26) {
    grid-column: 7;
    grid-row: 7;
  }
  .color-picker-item:nth-child(27) {
    grid-column: 8;
    grid-row: 8;
  }
  .color-picker-item:nth-child(28) {
    grid-column: 9;
    grid-row: 9;
  }
  .color-picker-item:nth-child(29) {
    grid-column: 10;
    grid-row: 10;
  }
  .color-picker-item:nth-child(30) {
    grid-column: 11;
    grid-row: 11;
  }

  /* 4rd row */
  .color-picker-item:nth-child(31) {
    grid-column: 2;
    grid-row: 3;
  }
  .color-picker-item:nth-child(32) {
    grid-column: 3;
    grid-row: 4;
  }
  .color-picker-item:nth-child(33) {
    grid-column: 4;
    grid-row: 5;
  }
  .color-picker-item:nth-child(34) {
    grid-column: 5;
    grid-row: 6;
  }
  .color-picker-item:nth-child(35) {
    grid-column: 6;
    grid-row: 7;
  }
  .color-picker-item:nth-child(36) {
    grid-column: 7;
    grid-row: 8;
  }
  .color-picker-item:nth-child(37) {
    grid-column: 8;
    grid-row: 9;
  }
  .color-picker-item:nth-child(38) {
    grid-column: 9;
    grid-row: 10;
  }
  .color-picker-item:nth-child(39) {
    grid-column: 10;
    grid-row: 11;
  }
  .color-picker-item:nth-child(40) {
    grid-column: 11;
    grid-row: 12;
  }

  /* 5th row */
  .color-picker-item:nth-child(41) {
    grid-column: 1;
    grid-row: 3;
  }
  .color-picker-item:nth-child(42) {
    grid-column: 2;
    grid-row: 4;
  }
  .color-picker-item:nth-child(43) {
    grid-column: 3;
    grid-row: 5;
  }
  .color-picker-item:nth-child(44) {
    grid-column: 4;
    grid-row: 6;
  }
  .color-picker-item:nth-child(45) {
    grid-column: 5;
    grid-row: 7;
  }
  .color-picker-item:nth-child(46) {
    grid-column: 6;
    grid-row: 8;
  }
  .color-picker-item:nth-child(47) {
    grid-column: 7;
    grid-row: 9;
  }
  .color-picker-item:nth-child(48) {
    grid-column: 8;
    grid-row: 10;
  }
  .color-picker-item:nth-child(49) {
    grid-column: 9;
    grid-row: 11;
  }
  .color-picker-item:nth-child(50) {
    grid-column: 10;
    grid-row: 12;
  }

  /* 6th row */
  .color-picker-item:nth-child(51) {
    grid-column: 1;
    grid-row: 4;
  }
  .color-picker-item:nth-child(52) {
    grid-column: 2;
    grid-row: 5;
  }
  .color-picker-item:nth-child(53) {
    grid-column: 3;
    grid-row: 6;
  }
  .color-picker-item:nth-child(54) {
    grid-column: 4;
    grid-row: 7;
  }
  .color-picker-item:nth-child(55) {
    grid-column: 5;
    grid-row: 8;
  }
  .color-picker-item:nth-child(56) {
    grid-column: 6;
    grid-row: 9;
  }
  .color-picker-item:nth-child(57) {
    grid-column: 7;
    grid-row: 10;
  }
  .color-picker-item:nth-child(58) {
    grid-column: 8;
    grid-row: 11;
  }
  .color-picker-item:nth-child(59) {
    grid-column: 9;
    grid-row: 12;
  }
  .color-picker-item:nth-child(60) {
    grid-column: 10;
    grid-row: 13;
  }

  h2 {
    text-align: center;
  }
</style>
<script>
  const currentName = document.querySelector<HTMLDivElement>(
    ".color-picker-current-name"
  );
  const colorPickerItems = document.querySelectorAll<HTMLAnchorElement>(
    "a.color-picker-item"
  );
  console.log({
    currentName,
    colorPickerItems,
  });

  if (currentName && colorPickerItems.length) {
    colorPickerItems.forEach((item) => {
      item.addEventListener("mouseover", (e) => {
        if (e.currentTarget instanceof HTMLAnchorElement) {
          const name = e.currentTarget.title;
          currentName.textContent = name;
        }
      });
      item.addEventListener("mouseout", () => {
        currentName.innerHTML = "&nbsp;";
      });
    });
  }
</script>
<BaseLayout title="Colors">
  <OS9Window title="Colors" asElement="main">
    <section class="page">
      <h2>Choose a color to explore themes:</h2>
      <div class="color-picker-wrapper">
        <div class="color-picker">
          {
            targetPaletteColors.map((color) => {
              return (
                <a
                  href={`/colors/${customSlugify(color[1]).toLowerCase()}`}
                  class="color-picker-item"
                  title={color[1]}
                >
                  <div
                    class="color-picker-block"
                    style={{
                      backgroundColor: color[0],
                    }}
                  />
                </a>
              );
            })
          }
        </div>
      </div>
      <div class="color-picker-current-name">&nbsp;</div>
    </section>
  </OS9Window>
</BaseLayout>
